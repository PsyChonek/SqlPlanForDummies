# SQL Plan For Dummies

An interactive SQL Execution Plan Viewer built with Tauri + Vue + D3.js that provides visual analysis and performance insights for query execution plans.

## Features

### Core Visualization
- **Interactive Tree Layout**: D3.js powered visualization of the execution plan hierarchy.
- **Performance Indicators**: Nodes are color-coded (Green/Yellow/Orange/Red) based on cost and severity.
- **Visual Cues**: Iconography for different physical operators (Seek, Scan, Join, etc.) and line thickness indicating data flow volume.
- **Navigation**: Zoom, pan, and keyboard support (Arrow keys) for easy traversal of large plans.

### Detailed Analysis
- **Node Inspection**: Click any operator to view comprehensive metrics (CPU, I/O, Rows, Time).
- **Estimates vs Actuals**: Highlight discrepancies between query optimizer estimates and runtime actuals.
- **Predicate Analysis**: Easy reading of Seek Predicates and Scan conditions.
- **Output Lists**: View output columns for each operation.

### Automated Insights
- **Performance Warnings**: Automatic detection of common issues like Table Scans, Missing Indexes, and Implicit Conversions.
- **Impact Assessment**: Evaluation of high-cost operators.
- **Comparison Engine**: Side-by-side plan comparison with difference highlighting.

### File Support
- **.sqlplan Parsing**: Native support for SQL Server XML ShowPlan format.
- **Export Options**: Export visualizations to PNG or SVG for documentation.

## Roadmap / Todo

- [ ] **Query Text Highlighting**: Syntax highlighting for the SQL statement text.
- [ ] **History & Sessions**: Remember recently opened plans and view history.
- [ ] **Multi-Tab Interface**: Allow multiple plans to be open simultaneously.
- [ ] **Advanced Filtering**: Search and filter nodes by type, cost, or object name.
- [ ] **Dark/Light Mode**: Toggle between themes (currently Dark Mode only).
- [ ] **Integration**: Support for opening directly from SSMS or Azure Data Studio (via command line args).

## Getting Started

### Prerequisites
- Node.js (v16 or higher)
- npm or yarn
- Rust (for Tauri development)

### Installation

```bash
# Install dependencies
npm install

# Run in development mode
npm run dev

# Build for production
npm run build

# Run Tauri app
npm run tauri dev
```

## Usage

1. **Load a Plan**: 
   - Drag and drop a `.sqlplan` (XML) file onto the landing area.
   - Use the "Load" button to browse for files.
   - Or experiment with the provided "Load Example" button to see a demo.

2. **Explore the Visualization**: 
   - **Navigate**: Drag to pan, scroll to zoom, use Arrow keys to move selection.
   - **Inspect**: Click a node to open the Detail Panel on the right.
   - **Analyze**: Check the "Analysis" tab for automated warnings.

## Supported Format

The application supports **SQL Server XML ShowPlan** format (`.sqlplan`).

This is the standard format generated by SQL Server Management Studio (SSMS) or Azure Data Studio when you save an execution plan.

```xml
<ShowPlanXML ...>
  <BatchSequence>
    ...
    <RelOp NodeId="0" PhysicalOp="Clustered Index Scan" ...>
    ...
    </RelOp>
  </BatchSequence>
</ShowPlanXML>
```

## Architecture

- **Frontend**: Vue 3 with Composition API
- **Visualization**: D3.js for SVG rendering
- **Desktop App**: Tauri 2.0
- **State Management**: Custom composable-based state
- **Styling**: Scoped CSS with gradients and animations

## Components

- `ExecutionPlanGraph.vue` - Main visualization component using D3.js
- `NodeDetails.vue` - Detailed node inspection panel
- `PlanLoader.vue` - File upload and parsing
- `AnalysisPanel.vue` - Performance analysis and recommendations
- `PlanComparison.vue` - Side-by-side plan comparison tool
- `planState.ts` - Centralized state management composable

## License

See LICENSE file

## Contributing

This is an educational project demonstrating SQL execution plan visualization techniques.
